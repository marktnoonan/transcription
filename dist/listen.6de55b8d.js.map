{"version":3,"sources":["javascripts/common.js","node_modules/zenscroll/zenscroll.js","javascripts/export.js","javascripts/listen.js"],"names":["config","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","darkThemeOn","database","toggleDarkTheme","document","querySelector","classList","toggle","fontMinus","transcript","currentSize","parseFloat","window","getComputedStyle","fontSize","style","fontPlus","toggleHeader","header","button","innerText","exportToggle","navigator","clipboard","writeText","textContent","nameToggle","about","exporttext","name","contains","add","remove","focus","closePopup","getExport","flt","listening","wrapper","text","JSON","parse","exportCurrentTranscript","textArea","createElement","Object","values","join","setAttribute","textbox","removeChild","appendChild","transcriptExportAsJSON","lines","Array","from","querySelectorAll","forEach","line","lineContent","map","msSinceStart","Number","id","substr","transcriptStartTime","console","log","stringify","getSubTime","timeInMs","hours","Math","floor","hh","minutes","mm","seconds","ss","milliseconds","ms","toString","substring","convertToSubFormat","transcriptAsJson","subText","previousEndTime","transcriptID","snippetIDs","wordsPushedToTranscript","charLengthOfPushes","currentLineID","lastResultCache","observeLinkRoot","haveListenedOnce","recognition","interim","getElementById","addEventListener","event","preventDefault","saveTranscriptID","SpeechRecognition","webkitSpeechRecognition","mozSpeechRecognition","msSpeechRecognition","lang","value","interimResults","maxAlternatives","onresult","Date","now","className","resultText","results","resultWords","split","minLengthNeeded","length","wordsToPush","i","push","pushWordsToTranscript","zenscroll","toY","body","scrollHeight","onend","words","numWords","snippetIdRoot","snippetID","span","append","addEditingListener","ref","set","completion","start","stop","arrayOfWords","firebase","initializeApp","observeLink","innerHTML","editedID","newElement","textChanged","blurListenerAdded","element","selectWord","e","keyCode","blur","getSelection","removeAllRanges","shiftKey","addBlurListener","newText","editedTimestamp","editedIndex","once","then","snapshot","lineAsArray","val","updatedLine","range","selection","createRange","selectNodeContents","addRange","createTextRange","moveToElementText","select","error","init","target","tagName"],"mappings":";ACAA;AEOA,AFNA;AACA;AEeA,AFdA;AACA;AEcA,AFbA;ACLe,ADMf,SCNwByC,SAAT,CAAmBC,GAAnB,EAAwB;AACrC,ADMF,MCNMA,GAAG,CAACC,SAAR,EAAmB;AACjB,ADMJ;ACLID,ACHJ,AFSA,ICNIA,GAAG,CAAC7B,MAAJ;AACD,ACHH,AFSA;AERA,AFSA;ADXA,AEKE,ACFF,AFSA,IDZIb,EEKE4C,IFLI,GAAG,AEKA,GAAGlC,QAAQ,CAACC,aAAT,CAAuB,aAAvB,CAAd;AFJDV,AEKC,ACFF,AFSA,EDZCA,IEKK4C,EFLC,EAAE,AEKC,GAAGC,IAAI,CAACC,KAAL,CAAWC,uBAAuB,CAACN,GFNnC,AEMkC,CAAlC,CAAX,CANqC,CAQrC;AFNDxC,AEOC,ACJF,AFSA,EDZCA,UAAU,EAAE,iCAFA;AAGZC,AGiBD,AFLA,EDZCA,WAAW,EAAE,wCAHD;AAIZC,AEMC,ACWF,AFLA,EDZCA,IEMK6C,KFNI,EAAE,CEME,GAAGvC,QAAQ,CAACwC,IFVb,SEUI,CAAuB,UAAvB,CAAf;AFLD7C,AEMC4C,ACWF,AFLA,EDZC5C,AEMC4C,QAAQ,CAAClB,IFNG,EAAE,EALH,GEWX,GAAuBoB,MAAM,CAACC,MAAP,CAAcP,IAAd,EAAoBQ,IAApB,CAAyB,MAAzB,CAAvB;AFLD/C,AEMC2C,ACWF,AFLA,EDZC3C,AEMC2C,QAAQ,CAACK,QFNO,EAAE,EEMlB,CAAsB,OAAtB,EAA+B,mBAA/B;AFZW,AEaX,ACWF,AFLA,CDnBA,GGwBIZ,EDXEa,CCWC,GAAG,GDXG,GAAG7C,QAAQ,CAACC,aAAT,CAAuB,oBAAvB,CAAd;ACYAH,AFLF,EEKEA,QAAQ,EAAE,IADF;AHfV,AEKE,ACYAO,AFLF,EEKEA,EHjBER,EEKEqC,MCYM,CDZC,CAACR,ACYA1B,CHjBC,GAAG,IEKZ,ACYgB,CHjBtB,AEKuB6C,ACYA5C,ODZjB,CAAJ,EAA+B,GCYnB,CAAuB,aAAvB,CAFJ;AHdV,AEKIiC,ACYFiD,AFLF,EEKEA,EHjBErF,AEKAoC,OAAO,CFLX,AEKYY,ECYE,EAAE,EAHN,KDTN,CAAoBD,OAApB;AACAX,ACYFkD,AFLF,EEKEA,EDZElD,OAAO,CAACa,ACYA,EAAE,EAJJ,ODRN,CAAoBR,QAApB;AFJJ,AEKIP,ACYFC,AFLF,EEKEA,EDZED,GAAG,CAAC3B,CFLCN,EGiBE,EAAE,KDZT,ACOM,CDPSgD,KFLnB,GAA2B,GEKvB,CAA2Bb,OAA3B;AFJHlC,AEKE,ACYDqF,AFLF,EDZCrF,AGiBCqF,CDhBA,MAIO,CFLA,CAACpF,aAAT,CAAuB,AGiBC,EAAE,CANjB,GHXT,EAA+BC,SAA/B,CAAyCC,MAAzC,CAAgD,MAAhD;AACA,AEKG+B,ACYFoD,AFLF,EEKEA,EDZEpD,OAAO,CAACa,QCYQ,EAAE,CDZlB,ACKM,CDLcR,QAApB;AACAP,ACYFuD,AFLF,EEKEA,EDZEvD,GAAG,CAAC3B,OCYO,EAAE,CDZb,CAAe0C,ACIT,WDJN,CAA2Bb,OAA3B;AFJJ,AEKG,ACYDsD,AFLF,EEKEA,OHjBOpF,QGiBQ,CHjBjB,CGiBmB,EHjBE,AGQX;AHPT,AEKA,ACYCqF,AFLF,ECNA,ACWEA,IHjBGpF,UAAU,CGiBE,EHjBCL,AGiBC,QHjBO,CAACC,aAAT,CAAuB,aAAvB,CAAjB,oBGOS;AHNT,AGiBC,AFLF,MDZKK,WAAW,GAAGC,UAAU,CAACC,MAAM,CAACC,gBAAP,CAAwBJ,UAAxB,EAAoCK,QAArC,CAA5B;AGkBCmD,AFLF,EEKEA,mBAAmB,EAAE,EAZb;AHLT,AEKD,ACaE6B,AFLF,EEKEA,IHlBGpF,GEKIgC,QFLO,CGkBE,EAAE,CHlBA,EAAnB,EAAuB,AGKd,ODAV,CAAiCN,GAAjC,EAAsC;AFJpC3B,AEKA,ACaAiD,AFLF,EEKEA,EHlBAjD,EEKI2C,ACaA,EAAE,IAdE,EHJE,CAACrC,KAAX,CAAiBD,OEKS,CFL1B,EEK6B,CFLCJ,CEK9B,UFLyC,GAAG,EAAf,GAAsB,IAAnD;AACA,AEKA,ACaAqF,AFLF,EEKEA,IDbI1C,KAAK,ECaE,CDbCC,CCaC,IDbI,ACFT,CDEUC,IAAN,CAAWnB,GAAG,CAAC3B,UAAJ,CAAe+C,gBAAf,CAAgC,KAAhC,CAAX,CAAZ;AFJD,AEKCH,ACaA2C,AFLF,ECRE3C,ACaA2C,KDbK,CAACvC,CCaC,EAAE,IDbT,CAAc,UAAUC,IAAV,EAAgB;AAC5B,ACJM,AFYV,CEZA,EAkBA,KDdQC,WAAW,GAAGL,KAAK,CAACC,IAAN,CAAWG,IAAI,CAACF,gBAAL,CAAsB,MAAtB,CAAX,EACfI,GADe,CACX,UAACF,IAAD;AFLX,AEKW,ACcX,AFNA,SDbS1C,IEKY0C,IFLrB,AEKyB,CAACjC,EFLN,SEKT;AFJV,AEIU,ADSX,KCVsB,CFHjBhB,CEKEsC,IAFe,CAEV,GAFU,CFHP,AEGX,CAD4B,CAI5B,CFNc3C,QAAQ,CAACC,aAAT,CAAuB,aAAvB,CAAjB;AACA,AEMG,ACYJ,AFLA,IEKID,EHlBCM,MGkBO,CAACuF,IHlBG,GAAGtF,OGkBf,CAAwB,EHlBC,CAACC,MAAM,CAACC,QGkBjC,CAAJ,EAAiD,KHlBnB,CAAwBJ,UAAxB,EAAoCK,QAArC,CAA5B;AEOG,ACYFV,AFLF,EEKEA,QAAQ,CAAC6F,cAAT,CAAwB,kBAAxB,EAA4CC,gBAA5C,CAA6D,QAA7D,EAAuE,UAAUC,KAAV,EAAiB;AHlBzF,AEOG,ACYAA,AFLJ,IEKIA,EHnBCzF,GGmBI,CAAC0F,OHnBM,IAAI,EAAnB,CGmBG,CHnBoB;AACtB3F,AEOE,ACYA2B,AFLJ,IDdE3B,AGmBE2B,GAAG,CAACiE,MHnBI,CAACtF,KAAX,CAAiBD,GGmBf,KHnBF,GAA8BJ,WAAW,GAAG,EAAf,GAAsB,IAAnD;AACA,AEOE,ACYD,AFLH,GEEE;AHfD,AGmBA,AFLD,EEOA;ADdI,ADQJ,QCRQmD,YAAY,GAAGC,MAAM,CAACJ,IAAI,CAACK,EAAL,CAAQC,MAAR,CAAe,CAAf,CAAD,CAAN,GAA4BF,MAAM,CAAC1B,GAAG,CAAC6B,mBAAL,CAArD;AFLJ,AEMIC,ADQJ,ICRIA,KFNKjD,EEME,CAACkD,GAAR,CAAY,KFNhB,GAAwB;AACvB,AEKiBN,ACclBzB,AFLA,GEKG,CAAC2D,EHnBC7E,AEKa2C,MFLP,GAAGzD,AGmBd,GDd8B,ACcZ,EDdAyD,GFLI,AGmBCjD,CHnBAP,KGmBM,CAACiG,OHnBhB,CAAuB,QAAvB,CAAb,AGmBsB,IACrB1F,MAAM,CAAC2F,uBADc,IAErB3F,MAAM,CAAC4F,oBAFc,IAGrB5F,MAAM,CAAC6F,mBAHS,GAAlB;AHlBCvF,AEIe,ACkBhBkB,AFRA,EDdClB,CGsBE,CAAC6E,CDlBA,GFJG,CAACzF,MGsBR,CAAgBoG,EHtBf,CAAiBnG,CGsBlB,GAAuBH,EHtBtB,CAAwB,KGsBM,CAAC6F,KHtB/B,SGsBsB,CAAwB,iBAAxB,EAA2CU,KAAlE;AHrBC,AEIGvD,ACkBJhB,AFRA,GEQG,CDlBCgB,ACkBA2C,EHtBC5E,MAAM,GAAGf,AGsBd,CAAgBwG,OHtBM,CAACvG,EEIG,CAACwD,GCkB3B,GAAiC,IHtBnB,AGsBd,CHtBqC,CEIX,CAAtB,GAAuCF,WAAvC,OFJU,CAAb;AEKE,ACkBHvB,AFRA,GCvBE,AC+BC,CAAC2D,WAAJ,CAAgBc,eAAhB,GAAkC,CAAlC;AHtBC,AEKC,ACkBFzE,AFRA,GEQG,CAAC4D,EHvBC7E,GEKIqB,ECkBT,CHvBW,CAACpB,AEKC,CAACgD,ACkBAhE,QHvBT,AGuBiB,CDlBb,ACkBcC,CDlBC+C,EFLC,UGuBX,CAAuB,EHvBpC,EAAuC,KEK/B,CAAP,ACkBY,CAAd,EAEA;AHxBEjC,AEKD,ADUD,ECTA,EFNEA,MAAM,CAACC,SAAP,GAAmB,aAAnB;AACA,AEMF,ACkBAgB,AFTA,GDjBC,AG0BE,CAAC2D,KHvBE,MGuBN,CAAgBe,QAAhB,GAA2B,UAAUX,KAAV,EAAiB;AHtB1ChF,AGuBA,AFTF,IDdEA,EGuBI,CAACiB,GHvBC,AGuBE,CHvBDhB,AGuBEuE,SHvBT,GAAmB,CGuBnB,EAAwB,UHvBxB;AACA,AGuBEvD,AFTJ,IESIA,GAAG,CAACuD,aAAJ,GAAoBoB,IAAI,CAACC,GAAL,EAApB,CADsB,CACU;AHtBnC,AEGD,ADWA,SCXS3C,UAAT,CAAoBC,QAApB,EAA8B;AAC5B,ACmBElC,AFRJ,IEQIA,EDnBEmC,CCmBC,CAACb,GDnBG,CCmBP,EDnBUc,CCmBCpE,GDnBG,CAACqE,ICmBI,CDnBT,ACmBU7B,CDnBC0B,QAAQ,IAAI,ACmBtB,CAAuB,KAAvB,CDnB6B,ACmBxC,EDnBiC,GAAY,EAAhB,CAAnB,CAAZ;AFFF,AEGE,ACmBElC,AFRJ,IEQIA,EDnBEsC,CCmBC,CDnBC,ACmBAhB,CHtBCrC,EEGEkD,CCmBP,CAASR,EAAT,CDnBY,ECmBE,CDnBC,CAAR,CFHX,EEGuBQ,CFHC,GGsBGnC,CDnBhB,ECmBmB,CDnBC,ACmBAuD,MDnBMpB,KAAnC,ECmBE;AHpBHjD,AEGC,ACkBEc,AFRJ,EDbCd,EGqBGc,EDlBEuC,CCkBC,CAACjB,GHrBE,CAACnC,AGqBP,CDlBS,ACkBA0F,GDlBGzC,IAAI,CFHnB,AEGoBC,CFHAjD,AGqBjB,GAAqB,CDlBT,CAAW,CAAC8C,GFH3B,CAA8BlE,IEGK,GAAGmE,CFHA,CAAClE,CGqBpC,EDlBwC,GAAG,EAAR,GAAa,EFHrB,AEGQ,CFHe,EEGG,IAA9B,KAAuC,OAAO,EFH1C,AEGJ,CAAX,CFH4DoB,AEG1E,WFHD;AAEA,AEEC,ACkBEW,AFRJ,IEQIA,EDlBEwC,CCkBC,CDlBC,ACkBAnE,GDlBGkE,OAAO,ACkBd,CAAexB,EDlBE,CAAV,GAAcwB,KCkBrB,CAA2BvC,CDlBpB,ECkBuB,CDlBC,ACkBAsB,IAA/B,EDlBqCiB,OAAvC;AACA,ACkBC,AFRH;ADXA,AEEE,ADUF,MCVME,GFFGnD,IEEI,GAAG8C,GFFhB,CEEoB,CAACC,CFFC,IEEN,CAAW,CAACH,QAAQ,IAAIC,KAAK,GAAG,EAAR,GAAa,EAAb,GAAkB,IAAlB,GAAyBI,OAAO,GAAG,EAAV,GAAe,IAA5C,CAAT,IAA8D,IAAzE,CAAd;AFDD,AEEC,ACkBA,AFRF,MDZOhD,AEEDmD,ACkBAoC,EDlBE,GFFI,AEEDrC,GFFIzE,EGoBC,EDlBE,CCkBC+F,EDlBE,CFFE,AEEZ,CFFa9F,CGoBA,CDlBCwE,ACkBAsC,ODlBd,ACkBQ,CAAc,CAAd,CDlBgB,CFFpB,AGoBqB,CHpBE,AGoBnB,EAAoB1G,EDlBEoE,OAAvC,CFFa,AGoBb,CHpBD;AACA,AEGC,ACiBA,AFRF,MDZOjD,AEGDmD,ACiBAqC,UHpBW,CGoBA,CDjBC,CFHEhH,CGoBA8G,CDjBC1C,IAAI,CAACC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","file":"listen.6de55b8d.js","sourceRoot":"..","sourcesContent":["var config = {\n\tapiKey: \"AIzaSyD591s8Of9vqduC2ZAakt9mMQRin4wCFSQ\",\n\tauthDomain: \"live-transcript.firebaseapp.com\",\n\tdatabaseURL: \"https://live-transcript.firebaseio.com\",\n\tprojectId: \"live-transcript\",\n\tstorageBucket: \"\",\n\tmessagingSenderId: \"1024703297861\"\n};\n\nvar darkThemeOn = false;\nvar database;\n\nfunction toggleDarkTheme() {\n\tdocument.querySelector('body').classList.toggle('dark')\n}\n\nfunction fontMinus() {\n\tvar transcript = document.querySelector(\"#transcript\");\n\tvar currentSize = parseFloat(window.getComputedStyle(transcript).fontSize);\n\tif (currentSize != 16) {\n\t\ttranscript.style.fontSize =  (currentSize - 10 ) + 'px';\n\t}\n}\n\nfunction fontPlus() {\n\tvar transcript = document.querySelector(\"#transcript\");\n\tvar currentSize = parseFloat(window.getComputedStyle(transcript).fontSize);\n\tif (currentSize != 76) {\n\t\ttranscript.style.fontSize =  (currentSize + 10 ) + 'px';\n\t}\n}\n\nfunction toggleHeader() {\n\tvar header = document.querySelector(\"header\");\n\theader.classList.toggle('translate');\n\tvar button = document.querySelector(\"#header-toggle-button\");\n\tif (button.innerText == \"Hide Header\") {\n\t\tbutton.innerText = \"Show Header\";\n\t}\n\telse {\n\t\tbutton.innerText = \"Hide Header\";\n\t}\n}\n\nfunction exportToggle() {\n\n\tnavigator.clipboard.writeText(document.querySelector('.transcript-export').textContent);\n\n}\n\nfunction nameToggle() {\n\tconst about = document.querySelector('.about-box')\n\tconst exporttext = document.querySelector(\".export-box\")\n\tconst name = document.querySelector(\".name-box\")\n\tif (name.classList.contains('hidden')) {\n\t\texporttext.classList.add('hidden');\n\t\tname.classList.remove('hidden');\n\t\tdocument.querySelector(\"#exit-popup\").focus()\n\t} else {\n\t\tname.classList.add('hidden');\n\t}\n}\n\nfunction closePopup() {\n\tconst name = document.querySelector(\".name-box\");\n\tif (!name.classList.contains('hidden'))  {\n\t\tname.classList.add('hidden');\n\t}\n}\n\nexport { config, toggleDarkTheme, toggleHeader, fontMinus, fontPlus, closePopup, exportToggle, nameToggle };","/**\n * Zenscroll 4.0.2\n * https://github.com/zengabor/zenscroll/\n *\n * Copyright 2015–2018 Gabor Lenard\n *\n * This is free and unencumbered software released into the public domain.\n * \n * Anyone is free to copy, modify, publish, use, compile, sell, or\n * distribute this software, either in source code form or as a compiled\n * binary, for any purpose, commercial or non-commercial, and by any\n * means.\n * \n * In jurisdictions that recognize copyright laws, the author or authors\n * of this software dedicate any and all copyright interest in the\n * software to the public domain. We make this dedication for the benefit\n * of the public at large and to the detriment of our heirs and\n * successors. We intend this dedication to be an overt act of\n * relinquishment in perpetuity of all present and future rights to this\n * software under copyright law.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\n * IN NO EVENT SHALL THE AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR\n * OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,\n * ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n * OTHER DEALINGS IN THE SOFTWARE.\n * \n * For more information, please refer to <http://unlicense.org>\n * \n */\n\n/*jshint devel:true, asi:true */\n\n/*global define, module */\n\n\n(function (root, factory) {\n\tif (typeof define === \"function\" && define.amd) {\n\t\tdefine([], factory())\n\t} else if (typeof module === \"object\" && module.exports) {\n\t\tmodule.exports = factory()\n\t} else {\n\t\t(function install() {\n\t\t\t// To make sure Zenscroll can be referenced from the header, before `body` is available\n\t\t\tif (document && document.body) {\n\t\t\t\troot.zenscroll = factory()\n\t\t\t} else {\n\t\t\t\t// retry 9ms later\n\t\t\t\tsetTimeout(install, 9)\n\t\t\t}\n\t\t})()\n\t}\n}(this, function () {\n\t\"use strict\"\n\n\n\t// Detect if the browser already supports native smooth scrolling (e.g., Firefox 36+ and Chrome 49+) and it is enabled:\n\tvar isNativeSmoothScrollEnabledOn = function (elem) {\n\t\treturn elem && \"getComputedStyle\" in window &&\n\t\t\twindow.getComputedStyle(elem)[\"scroll-behavior\"] === \"smooth\"\n\t}\n\n\n\t// Exit if it’s not a browser environment:\n\tif (typeof window === \"undefined\" || !(\"document\" in window)) {\n\t\treturn {}\n\t}\n\n\n\tvar makeScroller = function (container, defaultDuration, edgeOffset) {\n\n\t\t// Use defaults if not provided\n\t\tdefaultDuration = defaultDuration || 999 //ms\n\t\tif (!edgeOffset && edgeOffset !== 0) {\n\t\t\t// When scrolling, this amount of distance is kept from the edges of the container:\n\t\t\tedgeOffset = 9 //px\n\t\t}\n\n\t\t// Handling the life-cycle of the scroller\n\t\tvar scrollTimeoutId\n\t\tvar setScrollTimeoutId = function (newValue) {\n\t\t\tscrollTimeoutId = newValue\n\t\t}\n\n\t\t/**\n\t\t * Stop the current smooth scroll operation immediately\n\t\t */\n\t\tvar stopScroll = function () {\n\t\t\tclearTimeout(scrollTimeoutId)\n\t\t\tsetScrollTimeoutId(0)\n\t\t}\n\n\t\tvar getTopWithEdgeOffset = function (elem) {\n\t\t\treturn Math.max(0, container.getTopOf(elem) - edgeOffset)\n\t\t}\n\n\t\t/**\n\t\t * Scrolls to a specific vertical position in the document.\n\t\t *\n\t\t * @param {targetY} The vertical position within the document.\n\t\t * @param {duration} Optionally the duration of the scroll operation.\n\t\t *        If not provided the default duration is used.\n\t\t * @param {onDone} An optional callback function to be invoked once the scroll finished.\n\t\t */\n\t\tvar scrollToY = function (targetY, duration, onDone) {\n\t\t\tstopScroll()\n\t\t\tif (duration === 0 || (duration && duration < 0) || isNativeSmoothScrollEnabledOn(container.body)) {\n\t\t\t\tcontainer.toY(targetY)\n\t\t\t\tif (onDone) {\n\t\t\t\t\tonDone()\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tvar startY = container.getY()\n\t\t\t\tvar distance = Math.max(0, targetY) - startY\n\t\t\t\tvar startTime = new Date().getTime()\n\t\t\t\tduration = duration || Math.min(Math.abs(distance), defaultDuration);\n\t\t\t\t(function loopScroll() {\n\t\t\t\t\tsetScrollTimeoutId(setTimeout(function () {\n\t\t\t\t\t\t// Calculate percentage:\n\t\t\t\t\t\tvar p = Math.min(1, (new Date().getTime() - startTime) / duration)\n\t\t\t\t\t\t// Calculate the absolute vertical position:\n\t\t\t\t\t\tvar y = Math.max(0, Math.floor(startY + distance*(p < 0.5 ? 2*p*p : p*(4 - p*2)-1)))\n\t\t\t\t\t\tcontainer.toY(y)\n\t\t\t\t\t\tif (p < 1 && (container.getHeight() + y) < container.body.scrollHeight) {\n\t\t\t\t\t\t\tloopScroll()\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsetTimeout(stopScroll, 99) // with cooldown time\n\t\t\t\t\t\t\tif (onDone) {\n\t\t\t\t\t\t\t\tonDone()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}, 9))\n\t\t\t\t})()\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Scrolls to the top of a specific element.\n\t\t *\n\t\t * @param {elem} The element to scroll to.\n\t\t * @param {duration} Optionally the duration of the scroll operation.\n\t\t * @param {onDone} An optional callback function to be invoked once the scroll finished.\n\t\t */\n\t\tvar scrollToElem = function (elem, duration, onDone) {\n\t\t\tscrollToY(getTopWithEdgeOffset(elem), duration, onDone)\n\t\t}\n\n\t\t/**\n\t\t * Scrolls an element into view if necessary.\n\t\t *\n\t\t * @param {elem} The element.\n\t\t * @param {duration} Optionally the duration of the scroll operation.\n\t\t * @param {onDone} An optional callback function to be invoked once the scroll finished.\n\t\t */\n\t\tvar scrollIntoView = function (elem, duration, onDone) {\n\t\t\tvar elemHeight = elem.getBoundingClientRect().height\n\t\t\tvar elemBottom = container.getTopOf(elem) + elemHeight\n\t\t\tvar containerHeight = container.getHeight()\n\t\t\tvar y = container.getY()\n\t\t\tvar containerBottom = y + containerHeight\n\t\t\tif (getTopWithEdgeOffset(elem) < y || (elemHeight + edgeOffset) > containerHeight) {\n\t\t\t\t// Element is clipped at top or is higher than screen.\n\t\t\t\tscrollToElem(elem, duration, onDone)\n\t\t\t} else if ((elemBottom + edgeOffset) > containerBottom) {\n\t\t\t\t// Element is clipped at the bottom.\n\t\t\t\tscrollToY(elemBottom - containerHeight + edgeOffset, duration, onDone)\n\t\t\t} else if (onDone) {\n\t\t\t\tonDone()\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Scrolls to the center of an element.\n\t\t *\n\t\t * @param {elem} The element.\n\t\t * @param {duration} Optionally the duration of the scroll operation.\n\t\t * @param {offset} Optionally the offset of the top of the element from the center of the screen.\n\t\t *        A value of 0 is ignored.\n\t\t * @param {onDone} An optional callback function to be invoked once the scroll finished.\n\t\t */\n\t\tvar scrollToCenterOf = function (elem, duration, offset, onDone) {\n\t\t\tscrollToY(Math.max(0, container.getTopOf(elem) - container.getHeight()/2 + (offset || elem.getBoundingClientRect().height/2)), duration, onDone)\n\t\t}\n\n\t\t/**\n\t\t * Changes default settings for this scroller.\n\t\t *\n\t\t * @param {newDefaultDuration} Optionally a new value for default duration, used for each scroll method by default.\n\t\t *        Ignored if null or undefined.\n\t\t * @param {newEdgeOffset} Optionally a new value for the edge offset, used by each scroll method by default. Ignored if null or undefined.\n\t\t * @returns An object with the current values.\n\t\t */\n\t\tvar setup = function (newDefaultDuration, newEdgeOffset) {\n\t\t\tif (newDefaultDuration === 0 || newDefaultDuration) {\n\t\t\t\tdefaultDuration = newDefaultDuration\n\t\t\t}\n\t\t\tif (newEdgeOffset === 0 || newEdgeOffset) {\n\t\t\t\tedgeOffset = newEdgeOffset\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tdefaultDuration: defaultDuration,\n\t\t\t\tedgeOffset: edgeOffset\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tsetup: setup,\n\t\t\tto: scrollToElem,\n\t\t\ttoY: scrollToY,\n\t\t\tintoView: scrollIntoView,\n\t\t\tcenter: scrollToCenterOf,\n\t\t\tstop: stopScroll,\n\t\t\tmoving: function () { return !!scrollTimeoutId },\n\t\t\tgetY: container.getY,\n\t\t\tgetTopOf: container.getTopOf\n\t\t}\n\n\t}\n\n\n\tvar docElem = document.documentElement\n\tvar getDocY = function () { return window.scrollY || docElem.scrollTop }\n\n\t// Create a scroller for the document:\n\tvar zenscroll = makeScroller({\n\t\tbody: document.scrollingElement || document.body,\n\t\ttoY: function (y) { window.scrollTo(0, y) },\n\t\tgetY: getDocY,\n\t\tgetHeight: function () { return window.innerHeight || docElem.clientHeight },\n\t\tgetTopOf: function (elem) { return elem.getBoundingClientRect().top + getDocY() - docElem.offsetTop }\n\t})\n\n\n\t/**\n\t * Creates a scroller from the provided container element (e.g., a DIV)\n\t *\n\t * @param {scrollContainer} The vertical position within the document.\n\t * @param {defaultDuration} Optionally a value for default duration, used for each scroll method by default.\n\t *        Ignored if 0 or null or undefined.\n\t * @param {edgeOffset} Optionally a value for the edge offset, used by each scroll method by default. \n\t *        Ignored if null or undefined.\n\t * @returns A scroller object, similar to `zenscroll` but controlling the provided element.\n\t */\n\tzenscroll.createScroller = function (scrollContainer, defaultDuration, edgeOffset) {\n\t\treturn makeScroller({\n\t\t\tbody: scrollContainer,\n\t\t\ttoY: function (y) { scrollContainer.scrollTop = y },\n\t\t\tgetY: function () { return scrollContainer.scrollTop },\n\t\t\tgetHeight: function () { return Math.min(scrollContainer.clientHeight, window.innerHeight || docElem.clientHeight) },\n\t\t\tgetTopOf: function (elem) { return elem.offsetTop }\n\t\t}, defaultDuration, edgeOffset)\n\t}\n\n\n\t// Automatic link-smoothing on achors\n\t// Exclude IE8- or when native is enabled or Zenscroll auto- is disabled\n\tif (\"addEventListener\" in window && !window.noZensmooth && !isNativeSmoothScrollEnabledOn(document.body)) {\n\n\t\tvar isHistorySupported = \"history\" in window && \"pushState\" in history\n\t\tvar isScrollRestorationSupported = isHistorySupported && \"scrollRestoration\" in history\n\n\t\t// On first load & refresh make sure the browser restores the position first\n\t\tif (isScrollRestorationSupported) {\n\t\t\thistory.scrollRestoration = \"auto\"\n\t\t}\n\n\t\twindow.addEventListener(\"load\", function () {\n\n\t\t\tif (isScrollRestorationSupported) {\n\t\t\t\t// Set it to manual\n\t\t\t\tsetTimeout(function () { history.scrollRestoration = \"manual\" }, 9)\n\t\t\t\twindow.addEventListener(\"popstate\", function (event) {\n\t\t\t\t\tif (event.state && \"zenscrollY\" in event.state) {\n\t\t\t\t\t\tzenscroll.toY(event.state.zenscrollY)\n\t\t\t\t\t}\n\t\t\t\t}, false)\n\t\t\t}\n\n\t\t\t// Add edge offset on first load if necessary\n\t\t\t// This may not work on IE (or older computer?) as it requires more timeout, around 100 ms\n\t\t\tif (window.location.hash) {\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t// Adjustment is only needed if there is an edge offset:\n\t\t\t\t\tvar edgeOffset = zenscroll.setup().edgeOffset\n\t\t\t\t\tif (edgeOffset) {\n\t\t\t\t\t\tvar targetElem = document.getElementById(window.location.href.split(\"#\")[1])\n\t\t\t\t\t\tif (targetElem) {\n\t\t\t\t\t\t\tvar targetY = Math.max(0, zenscroll.getTopOf(targetElem) - edgeOffset)\n\t\t\t\t\t\t\tvar diff = zenscroll.getY() - targetY\n\t\t\t\t\t\t\t// Only do the adjustment if the browser is very close to the element:\n\t\t\t\t\t\t\tif (0 <= diff && diff < 9 ) {\n\t\t\t\t\t\t\t\twindow.scrollTo(0, targetY)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, 9)\n\t\t\t}\n\n\t\t}, false)\n\n\t\t// Handling clicks on anchors\n\t\tvar RE_noZensmooth = new RegExp(\"(^|\\\\s)noZensmooth(\\\\s|$)\")\n\t\twindow.addEventListener(\"click\", function (event) {\n\t\t\tvar anchor = event.target\n\t\t\twhile (anchor && anchor.tagName !== \"A\") {\n\t\t\t\tanchor = anchor.parentNode\n\t\t\t}\n\t\t\t// Let the browser handle the click if it wasn't with the primary button, or with some modifier keys:\n\t\t\tif (!anchor || event.which !== 1 || event.shiftKey || event.metaKey || event.ctrlKey || event.altKey) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\t// Save the current scrolling position so it can be used for scroll restoration:\n\t\t\tif (isScrollRestorationSupported) {\n\t\t\t\tvar historyState = history.state && typeof history.state === \"object\" ? history.state : {}\n\t\t\t\thistoryState.zenscrollY = zenscroll.getY()\n\t\t\t\ttry {\n\t\t\t\t\thistory.replaceState(historyState, \"\")\n\t\t\t\t} catch (e) {\n\t\t\t\t\t// Avoid the Chrome Security exception on file protocol, e.g., file://index.html\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Find the referenced ID:\n\t\t\tvar href = anchor.getAttribute(\"href\") || \"\"\n\t\t\tif (href.indexOf(\"#\") === 0 && !RE_noZensmooth.test(anchor.className)) {\n\t\t\t\tvar targetY = 0\n\t\t\t\tvar targetElem = document.getElementById(href.substring(1))\n\t\t\t\tif (href !== \"#\") {\n\t\t\t\t\tif (!targetElem) {\n\t\t\t\t\t\t// Let the browser handle the click if the target ID is not found.\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t\ttargetY = zenscroll.getTopOf(targetElem)\n\t\t\t\t}\n\t\t\t\tevent.preventDefault()\n\t\t\t\t// By default trigger the browser's `hashchange` event...\n\t\t\t\tvar onDone = function () { window.location = href }\n\t\t\t\t// ...unless there is an edge offset specified\n\t\t\t\tvar edgeOffset = zenscroll.setup().edgeOffset\n\t\t\t\tif (edgeOffset) {\n\t\t\t\t\ttargetY = Math.max(0, targetY - edgeOffset)\n\t\t\t\t\tif (isHistorySupported) {\n\t\t\t\t\t\tonDone = function () { history.pushState({}, \"\", href) }\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tzenscroll.toY(targetY, null, onDone)\n\t\t\t}\n\t\t}, false)\n\n\t}\n\n\n\treturn zenscroll\n\n\n}));\n","export default function getExport(flt) {\n  if (flt.listening) {\n    // important, cause things go crazy if we're still adding to the transcript after export.\n    flt.toggle();\n  }\n  var wrapper = document.querySelector(\".export-box\");\n  var text = JSON.parse(exportCurrentTranscript(flt));\n\n  // TODO - this display in a textarea is not so great, it blocks the transcript itself,\n  // a genuine modal would be nicer.\n  var textArea = document.createElement(\"textarea\");\n  textArea.textContent = Object.values(text).join(\"\\r\\n\");\n  textArea.setAttribute(\"class\", \"transcript-export\");\n  var textbox = document.querySelector(\".transcript-export\");\n  if (wrapper.contains(textbox)) {\n    wrapper.removeChild(textbox);\n    wrapper.appendChild(textArea);\n    flt.transcript.appendChild(wrapper);\n  } else {\n    wrapper.appendChild(textArea);\n    flt.transcript.appendChild(wrapper);\n  }\n}\n// ----------------------------------------------------------------------------\nfunction exportCurrentTranscript(flt) {\n  var transcriptExportAsJSON = {};\n  var lines = Array.from(flt.transcript.querySelectorAll(\"div\"));\n  lines.forEach(function (line) {\n    var lineContent = Array.from(line.querySelectorAll(\"span\"))\n      .map((line) => line.textContent)\n      .join(\" \");\n    // TODO This part is definitely funky and not doing the ideal thing.\n    // the part the gets the MS is not correct.\n    // We probably need to keep a reference to the very first word in the transcript\n    // subtract that time from every subsequent word... so the first word is zero,\n    // and everything after that is the correct MS. The absolute timestamp doesn't really matter\n    // and in an exported transcript should _definitely_ be ignored. Probably in the DB it should stay.\n    var msSinceStart = Number(line.id.substr(4)) - Number(flt.transcriptStartTime);\n    console.log({ msSinceStart });\n    transcriptExportAsJSON[msSinceStart] = lineContent;\n  });\n  return JSON.stringify(transcriptExportAsJSON);\n}\n// ----------------------------------------------------------------------------\n// TODO: fix this function, or just redo it using the date-fns library or something. It has never 100% worked\nfunction getSubTime(timeInMs) {\n  var hours = Math.floor(timeInMs / (1000 * 60 * 60));\n  var hh = hours > 9 ? hours : \"0\" + hours;\n\n  var minutes = Math.floor((timeInMs - hours * 60 * 60 * 1000) / (1000 * 60));\n  var mm = minutes > 9 ? minutes : \"0\" + minutes;\n  debugger;\n  var seconds = Math.floor((timeInMs - (hours * 60 * 60 * 1000 - minutes * 60 * 1000)) / 1000);\n  var ss = seconds > 9 ? seconds : \"0\" + seconds;\n\n  var milliseconds = Math.floor(timeInMs - (hours * 60 * 60 * 1000 - minutes * 60 * 1000 - seconds * 1000));\n  var ms = milliseconds > 9 ? milliseconds.toString().substring(0, 2) : \"0\" + milliseconds;\n\n  return hh + \":\" + mm + \":\" + ss + \".\" + ms;\n}\n// ----------------------------------------------------------------------------\n// TODO: double check the output format against standard subrip format https://en.wikipedia.org/wiki/SubRip#SubRip_text_file_format\nfunction convertToSubFormat(transcriptAsJson) {\n  var subText = \"\";\n  var previousEndTime = \"00:00:00.00\";\n\n  for (var line in transcriptAsJson) {\n    subText += \"\\n\" + previousEndTime;\n    subText += line;\n  }\n  return subText;\n}\n\n// TODO: find a way to offer exported transcript as plain text or a download as a .srt file,\n// this might be a hand reference since we are chrome-only anyway: https://twitter.com/sulco/status/1313798240043753473\n","// TODO: these globals could all quite happily live in an object called \"liveTranscript\" or something, to avoid getting in the global namespace.\n// TODO: likewise, all these global functions can live in that object too.\n// TODO: this whole script can move to its own file.\n// TODO: we can establish stadards for the kind of JS permitted in the project. _This_ page requires chrome and could use most ES6+ features that are implemented in Chrome, but the observer page is targeted to any possible display that can run enough JS for firebase.\n// TODO: Transcripts should be really simple to use and broadcast. But right now there is just read/write access to the DB for anyody who wants it. I would like to have no login whatsoever and still have the person who started a listening session ALWAYS remain in charge of it, so it couldn't be over written. There are probably many ways to do it. Right now if I am recording a named transcript, and somebody else names their transcript the same name as mine, we are both then feeding into the same exact DB location. That's dumb. But there are cases where you WOULD want to resume an existing named transcript at right now you just type in the name and pick up where you left off. Really curious to see how we can make this \"just work\" by maybe caching something in a cookie or local storage or whatever.\n// TODO: I haven't dug into Zenscroll enough to know how it handles being called repeatedly, but sometimes I see jankyness and we may need to look at how to only call Zenscroll if we are not already scrolling. My naive version of that didn't work as expected.\n\nimport {\n  config,\n  toggleDarkTheme,\n  toggleHeader,\n  fontMinus,\n  fontPlus,\n  closePopup,\n  exportToggle,\n  nameToggle,\n} from \"./common\";\nimport zenscroll from \"zenscroll\";\nimport getExport from \"./export\";\n\n// ----------------------------------------------------------------------------\n// Create a singleton to hold global variables.\n//\n// \"flt\" stands for \"free live transcript.\"\nvar flt = {\n  database: null,\n  transcript: document.querySelector(\"#transcript\"),\n  transcriptID: \"\",\n  snippetIDs: [],\n  listening: false,\n  wordsPushedToTranscript: 0,\n  charLengthOfPushes: 0,\n  currentLineID: \"\",\n  lastResultCache: \"\",\n  observeLinkRoot: \"https://markthomasnoonan.com/transcription/observe.html\",\n  //    scrolling: false,\n  transcriptStartTime: \"\",\n  haveListenedOnce: false,\n  line: null,\n  recognition: null,\n  interim: null,\n};\n// ----------------------------------------------------------------------------\n// ----------------------------------------------------------------------------\nif (document.getElementById(\"transcriptIDForm\")) {\n  document.getElementById(\"transcriptIDForm\").addEventListener(\"submit\", function (event) {\n    event.preventDefault();\n    flt.saveTranscriptID();\n  });\n}\n\n// ----------------------------------------------------------------------------\nflt.recognition = new (window.SpeechRecognition ||\n  window.webkitSpeechRecognition ||\n  window.mozSpeechRecognition ||\n  window.msSpeechRecognition)();\nflt.recognition.lang = document.getElementById(\"select-language\").value;\nflt.recognition.interimResults = true;\nflt.recognition.maxAlternatives = 1;\nflt.interim = document.querySelector(\"#interim\");\n\n//TODO: refactor this onresult function for clarity. Especially, just extract it and give it a name so that it's just recognition.onresult = manageInterimResults or something... most of the blocks in this function could be given their own name.\nflt.recognition.onresult = function (event) {\n  if (!flt.currentLineID) {\n    flt.currentLineID = Date.now(); // this is what we will really use to handle \"replay\" timing I think. - Mark\n    flt.line = document.createElement(\"div\");\n    flt.line.id = \"line\" + flt.currentLineID;\n    flt.line.className = \"transcript-line\";\n    flt.transcript.appendChild(flt.line);\n  }\n\n  var resultText = event.results[0][0].transcript;\n  var resultWords = resultText.split(\" \");\n  var minLengthNeeded = 10 + flt.wordsPushedToTranscript;\n\n  if (resultWords.length > minLengthNeeded) {\n    var wordsToPush = [];\n    for (var i = flt.wordsPushedToTranscript; i < flt.wordsPushedToTranscript + 5; i++) {\n      wordsToPush.push(resultWords[i]);\n    }\n    flt.pushWordsToTranscript(wordsToPush);\n    flt.wordsPushedToTranscript += 5;\n\n    flt.charLengthOfPushes += wordsToPush.join(\" \").length;\n  }\n  if (flt.charLengthOfPushes) {\n    // the math here is to include the correct number of spaces in what we are removing from the\n    // beginning of the string. The goal is to not have the bottom fill up with text, obscuring the main\n    // part of the screen but also forcing people who are watching the the stream to wait for\n    // a pause so that the transcript can catch up.\n    flt.interim.textContent = resultText.substring(flt.charLengthOfPushes + flt.wordsPushedToTranscript / 5);\n    flt.lastResultCache = resultText.substring(flt.charLengthOfPushes + flt.wordsPushedToTranscript / 5);\n  } else {\n    flt.interim.textContent = resultText;\n    flt.lastResultCache = resultText;\n  }\n  zenscroll.toY(document.body.scrollHeight, 1500);\n};\n// ----------------------------------------------------------------------------\n// TODO: name, extract, and refactor the on-end function for clarity. Maybe I should comment some of the weirder stuff here to explain its purpose better.\nflt.recognition.onend = function (event) {\n  if (flt.lastResultCache != \"\") {\n    var words = flt.lastResultCache.split(\" \");\n    var numWords = words.length;\n    if (!flt.line) {\n      flt.line = document.createElement(\"div\");\n    }\n    var snippetIdRoot = Date.now();\n    for (var i = 0; i < words.length; i++) {\n      var snippetID = \"snippet\" + snippetIdRoot + \"-\" + (i + 1);\n      var span = document.createElement(\"span\");\n      span.className = \"snippet\";\n      span.id = snippetID;\n      span.setAttribute(\"contenteditable\", \"true\");\n      span.append(words[i]);\n      flt.line.appendChild(span);\n      flt.addEditingListener(snippetID, span);\n    }\n\n    if (flt.transcriptID !== \"\") {\n      flt.snippetIDs.push(snippetID);\n      flt.database\n        .ref(\"transcripts/\" + flt.transcriptID + \"/\" + snippetIdRoot)\n        .set(flt.recognition.lang + \"|\" + words.join(\"|\"), flt.completion);\n    }\n\n    flt.interim.textContent = \"\";\n    flt.lastResultCache = \"\";\n    flt.wordsPushedToTranscript = 0;\n    flt.charLengthOfPushes = 0;\n    flt.currentLineID = \"\";\n    flt.line = null;\n  }\n\n  if (flt.listening === false) {\n    return;\n  } else {\n    zenscroll.toY(document.body.scrollHeight, 2000);\n    flt.recognition.start();\n  }\n};\n// ----------------------------------------------------------------------------\n// TODO: Give a more descriptive name than toggle, since we have this toggle for using the mic, and another for using the light/dark themes.\nflt.toggle = function () {\n  console.log({ flt });\n  console.log(\"toggling\");\n  if (!flt.haveListenedOnce) {\n    flt.haveListenedOnce = true;\n    flt.transcriptStartTime = Date.now();\n  }\n\n  flt.listening = !flt.listening;\n\n\n  document.querySelector('.startListen').setAttribute(\"style\", flt.listening ? \"display:none\" : \"display:flex\");\n  document.querySelector(\".stopListen\").setAttribute(\"style\", flt.listening ? \"display:flex\" : \"display:none\");\n  if (!flt.listening) {\n    flt.recognition.stop();\n    flt.interim.textContent = \"\";\n\n  } else {\n    flt.recognition.start();\n  }\n};\n// ----------------------------------------------------------------------------\nflt.pushWordsToTranscript = function (arrayOfWords) {\n  var snippetIdRoot = Date.now();\n  for (var i = 0; i < arrayOfWords.length; i++) {\n    var snippetID = \"snippet\" + snippetIdRoot + \"-\" + i;\n    var span = document.createElement(\"span\");\n    span.className = \"snippet\";\n    span.id = snippetID;\n    span.setAttribute(\"contenteditable\", \"true\");\n    span.append(arrayOfWords[i]);\n    flt.addEditingListener(snippetID, span);\n    flt.line.appendChild(span);\n  }\n  if (flt.transcriptID !== \"\") {\n    flt.snippetIDs.push(snippetID);\n    flt.database\n      .ref(\"transcripts/\" + flt.transcriptID + \"/\" + snippetIdRoot)\n      .set(arrayOfWords.join(\"|\"), flt.completion);\n  }\n};\n// ----------------------------------------------------------------------------\n// TODO I think I can make this a little clearer.\nflt.saveTranscriptID = function () {\n  firebase.initializeApp(config);\n  flt.database = firebase.database();\n\n  flt.transcriptID = document.getElementById(\"newTranscriptID\").value;\n  var observeLink = flt.observeLinkRoot + \"?\" + flt.transcriptID;\n  document.getElementById(\"name-transcript\").innerHTML = \"Transcript name: \" + flt.transcriptID;\n  document.getElementById(\"transcriptIDForm\").innerHTML =\n    'Link for others to watch: <a href=\"' + observeLink + '\" target=\"_blank\">' + observeLink + \"</a>\";\n};\n// ----------------------------------------------------------------------------\nflt.addEditingListener = function (editedID, newElement) {\n  var textChanged = false;\n  var blurListenerAdded = false;\n  var element = newElement;\n  //document.getElementById(editedID);\n  element.addEventListener(\"click\", selectWord);\n  element.addEventListener(\"focus\", selectWord);\n\n  // TODO: name and extract this function that runs on keydown\n  element.addEventListener(\"keydown\", function (e) {\n    // esc and enter should confirm the edited word\n    if (e.keyCode == 27) {\n      element.blur();\n      window.getSelection().removeAllRanges();\n    } else if (e.keyCode == 13) {\n      element.blur();\n      e.preventDefault();\n      window.getSelection().removeAllRanges();\n    }\n\n    if ((!textChanged && e.keyCode == 9) || (!textChanged && e.shiftKey && e.keyCode == 9)) {\n      // do nothing - there must be a better way to express this!\n      // TODO: rewrite this conditional to be more clear. Maybe using something more obvious than the keycodes would be a good start?\n    } else if (!blurListenerAdded && flt.transcriptID !== \"\") {\n      textChanged = true;\n      blurListenerAdded = true;\n      addBlurListener();\n    }\n  });\n\n  function addBlurListener() {\n    element.addEventListener(\"blur\", function (e) {\n      var newText = element.textContent;\n      var editedTimestamp = editedID.substr(7, 13);\n      var editedIndex = editedID.split(\"-\")[1];\n      flt.database\n        .ref(\"transcripts/\" + flt.transcriptID + \"/\" + editedTimestamp)\n        .once(\"value\")\n        .then(function (snapshot) {\n          var lineAsArray = snapshot.val().split(\"|\");\n          lineAsArray[editedIndex] = newText;\n          var updatedLine = lineAsArray.join(\"|\");\n          flt.database.ref(\"transcripts/\" + flt.transcriptID + \"/\" + editedTimestamp).set(updatedLine, flt.completion);\n          flt.database.ref(\"transcripts/\" + flt.transcriptID + \"/just-updated\").set(editedTimestamp, flt.completion);\n        });\n    });\n  }\n\n  // TODO: This came from a stackoverflow answer and seems to work just fine, but I'm open to any other/better ways of selecting a word when it is clicked on so that the user can replace it just by typing.\n  function selectWord() {\n    var range, selection;\n    if (window.getSelection && document.createRange) {\n      selection = window.getSelection();\n      range = document.createRange();\n      range.selectNodeContents(this);\n      selection.removeAllRanges();\n      selection.addRange(range);\n    } else if (document.selection && document.body.createTextRange) {\n      range = document.body.createTextRange();\n      range.moveToElementText(this);\n      range.select();\n    }\n  }\n};\n// ----------------------------------------------------------------------------\n// TODO: rename this. It's just the callback that runs when firebase is done saving what we put in there. Maybe call it firebaseCompletion or something is better?\nflt.completion = function (error) {\n  console.log(\"completed\");\n  if (error) {\n    console.log(\"Data could not be saved.\" + error);\n  } else {\n    console.log(\"Data saved successfully.\");\n  }\n};\n// ----------------------------------------------------------------------------\n// init will add all our listeners and do any other set up that we need.\nfunction init() {\n  document.querySelector(\"#theme-toggle\").addEventListener(\"click\", toggleDarkTheme);\n\n  document.querySelector(\"#font-minus\").addEventListener(\"click\", fontMinus);\n\n  document.querySelector(\"#font-plus\").addEventListener(\"click\", fontPlus);\n\n  document.querySelector(\"#header-toggle-button\").addEventListener(\"click\", toggleHeader);\n\n  document.addEventListener(\"keydown\", (e) => {\n    if (e.keyCode == 27) {\n      closePopup();\n    }\n  });\n\n  document.querySelector(\"#export-button\").addEventListener(\"click\", exportToggle);\n\n  document.querySelector(\"#exit-popup\").addEventListener(\"click\", closePopup);\n\n  document.querySelector(\"#name-button\").addEventListener(\"click\", nameToggle);\n\n  document.addEventListener(\"click\", (e) => {\n    console.log(e.target.tagName);\n    if (e.target.tagName == \"HTML\" || e.target.tagName == \"MAIN\") {\n      closePopup();\n    }\n  });\n\n  document.querySelector(\"#select-language\").addEventListener(\"change\", function (event) {\n    flt.recognition.lang = event.target.value;\n  });\n}\nArray.from(document.querySelectorAll(\".listen-toggle\")).forEach((element) => {\n  element.addEventListener(\"click\", flt.toggle);\n});\ndocument.querySelector(\"#export-button\").addEventListener(\"click\", () => {\n  getExport(flt);\n});\n\ninit();\n"]}